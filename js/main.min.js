function animateThumb(e){var t=[],o=[],a=TweenMax;"briana"===e?(t.push("#bThumb"),o.push("#bFace")):"corey"===e?(t.push("#cThumb"),o.push("#cFace")):"both"===e&&(t.push("#bThumb","#cThumb"),o.push("#bFace","#cFace")),handAni(t,a),faceAni(o,a)}function handAni(e,t){e.map(function(e){var o=30,a=-15,n=-15;"#cThumb"===e&&(o=-30,n=15),t.set(e,{alpha:1}),t.from(e,.5,{alpha:0,x:n,y:a,ease:Power3.easeOut}),t.fromTo(e,1,{rotation:0},{rotation:o,yoyo:!0,repeat:1,delay:.25,ease:Power3.easeOut})})}function faceAni(e,t){e.map(function(e){var o=30;"#cFace"===e&&(o=-30),t.set(e,{alpha:1,x:o}),t.from(e,2,{alpha:0,y:-100,ease:Elastic.easeOut.config(1,.3)})})}function smoothScrolling(){$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length&&(e.preventDefault(),$("html, body").animate({scrollTop:t.offset().top},1e3,function(){var e=$(t);return e.focus(),!e.is(":focus")&&(e.attr("tabindex","-1"),void e.focus())}))}})}function hamMenu(){$(".hamburger").click(function(){$("div.hamburger").toggleClass("active"),$("ul.menu").toggleClass("show")})}function countdown(){var e=new Date("Aug 4, 2018 18:00:00").getTime(),t=setInterval(function(){var o=(new Date).getTime(),a=e-o,n=Math.floor(a/864e5),i=Math.floor(a%864e5/36e5),s=Math.floor(a%36e5/6e4),r=Math.floor(a%6e4/1e3);document.querySelector(".countdown").innerHTML=n+"d "+i+"h "+s+"m "+r+"s ",a<0&&(clearInterval(t),document.getElementById("demo").innerHTML="EXPIRED")},1e3)}function updateRsvpList(e,t){var o=ref.child(t.toString());forWho=e[4],o.update({2:!0,5:!0});var a=e[3].associated;e[3].associated.length>0?offerAssociates(a):showConfirmation()}function offerAssociates(e){var t=$("<fieldset>");t.attr({id:"otherRSVP"});for(var o=0;o<e.length;o++){var a=e[o],n=rsvpList[a];if(n[2]===!1){var i=n[0]+" "+n[1]+" ",s=n[0]+n[1],r=$("<label>");r.text(i),r.attr({"for":s}),r.appendTo(t);var c=$('<input type="checkbox">').attr({id:s,name:"rsvp"});c.data("id",a),c.appendTo(t)}}t.insertAfter($("#alsoRSVP h4")),$("#rsvpForm").hide(500,function(){$("#rsvpForm").toggleClass("hidden"),0===$("#alsoRSVP fieldset").children().length?showConfirmation(forWho):$("#alsoRSVP").show(500,function(){$("#alsoRSVP").toggleClass("hidden")})}),$("#alsoRSVP").submit(function(e){e.preventDefault();var t=checkboxValues();t.forEach(function(e){var t=rsvpList[e],o=t[0]+" "+t[1];rsvpSessionNames.push(o);var a=ref.child(e.toString());a.update({2:!0,5:!0})}),$("#alsoRSVP").hide(500,function(){$("#alsoRSVP").toggleClass("hidden"),showConfirmation(forWho)})})}function showConfirmation(e){if(1===rsvpSessionNames.length)$("#confirmation").text("Yay, "+rsvpSessionNames[0]+", you are RSVP'D!");else if(rsvpSessionNames.length>1){var t="Yay, ",o=" are RSVP'D!",a=rsvpSessionNames.join(", ");$("#confirmation").text(t+a+o)}else $("#confirmation").text("Looks like you have already confirmed!"),$("#rsvpForm").hide(500,function(){$("#rsvpForm").toggleClass("hidden")});$("#confirmation").show(500,function(){$("#confirmation").toggleClass("hidden")}),$("html, body").animate({scrollTop:$("#rsvp").offset().top},250),animateThumb(e)}function checkboxValues(){var e=[];return $("#alsoRSVP input:checked").each(function(){e.push($(this).data("id"))}),e}function getGuestList(e){e.on("value",gotData,errData)}function rsvpSubmit(){$("#rsvpForm").submit(function(e){e.preventDefault();var t=$("#inputFirstName").val().toLowerCase(),o=$("#inputLastName").val().toLowerCase(),a=$("input[type=radio]:checked").val(),n=t+" "+o;keys.map(function(e,i){var s=rsvpList[e],r=s[0]+" "+s[1];if(r===n)if("true"===a)s[2]?showConfirmation():(rsvpSessionNames.push(r),updateRsvpList(s,i));else{var c=ref.child(i.toString());c.update({5:!1}),cantAttened(0)}else searchTree(t,0)&&searchTree(o,1)||(console.log(searchTree(t,0)),console.log(searchTree(o,0)),cantAttened(1))})})}function searchTree(e,t){for(i=0;i<rsvpList.length;i++)if(result=rsvpList[i],result[t]===e)return!0;return!1}function cantAttened(e){$("#rsvpForm").hide(500,function(){$("#rsvpForm").toggleClass("hidden"),0===e&&($("#confirmation").text("We are :'c that you can't be there"),$("#confirmation").show(500)),1===e&&($("#confirmation").text("Something went wrong with our list. Do you want to try again?"),$("#confirmation").show(500),$("#restart").show(500,function(){$("#tryAgain").on("click",function(){$("#restart").hide(500),$("#restart").toggleClass("hidden"),$("#confirmation").hide(),$("#rsvpForm").show(500)})}),$("#restart").toggleClass("hidden"))})}function init(){getGuestList(ref),countdown(),hamMenu(),smoothScrolling(),rsvpSubmit()}function gotData(e){rsvpList=e.val(),keys=Object.keys(e.val())}function errData(e){console.log("err"),console.log(e)}var config={apiKey:"AIzaSyCcNA4oTGuKy3e99W0wn4_4Zz41jf4Vdbc",authDomain:"weddinglist-1a717.firebaseapp.com",databaseURL:"https://weddinglist-1a717.firebaseio.com",projectId:"weddinglist-1a717",storageBucket:"weddinglist-1a717.appspot.com",messagingSenderId:"510672576648"};firebase.initializeApp(config);var database=firebase.database(),ref=database.ref("masterSheet"),rsvpList,keys,rsvpSessionNames=[],forWho;$(function(){init()});